<odoo>
    <data>
        <!-- Vista Formulario loan.application  -->
        <record model="ir.ui.view" id="loan_calculator_id">
            <field name="name">loan.calculator.form</field>
            <field name="model">loan.calculator</field>
            <field name="arch" type="xml">
                <form string="Calculadora de prestamos" create="0" write="0">
                    <header>
                        <button name="reset_values" string="Reset" type="object"/>
<!--                        <button name="approval_state" string="Aprobar prestamo" class="oe_highlight" type="object"/>-->
                        <button name="approve_loan" string="Validar" type="object" class="oe_highlight" />
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="button_value_dolar" class="oe_stat_button" type="object" icon="fa-usd">
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_value">
                                        <field string=" " name="value_dolar" widget="statinfo"/>
                                    </span>
                                    <span class="o_stat_text">
                                        Dolar
                                    </span>
                                </div>
                            </button>
                        </div>
                        <group>
                            <group string="Datos">
                                <field name="name" invisible="1"/>
                                <field name="amount_loan_dollars"/>
                                <field name="amount_loan"/>
                                <field name="months_quantity"/>
                                <field name="date_application"/>
                                <field name="date_approval"/>
                                <field name="fixed_fee" widget="monetary"
                                       options="{'currency_field': 'currency_id_dollar'}"/>
                                <field name="fixed_fee_bs" widget="monetary"/>
                                <field name="pay_slip_balance" readonly="1"/>
                                <field name="surplus_days" readonly="1"/>
                                <field name="interest_month_surpluy"/>
                                <field name="total_interest_month_surpluy"/>
                                <!--                                <field name="mount"/>-->
                                <field name="percentage_amount_min_def"/>
                                <field name="amount_total"/>
                                <field name="amount_total_bs"/>

                            </group>
                            <group string="Calculo aproximado">
                                <field name="monthly_interest" readonly="1"/>
                                <field name="contingency_fund" readonly="1"/>
                                <field name="amount_min_def" readonly="1"/>
                                <!--                            <field name="commission_min_def"/>-->

                                <!--                            <field name="index_loan"/>-->
                                <!--                            <field name="index_loan_bs"/>-->
                            </group>
                        </group>
                        <notebook>
                            <page string="Pagos">
                                <field name="loan_payment_ids">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="date"/>
                                        <field name="period"/>
                                        <field name="capital_initial"/>
                                        <field name="capital_index_initial"/>
                                        <field name="mount" sum="Total"/>
                                        <!--                                        <field name="interest_base" attrs="{'column_invisible': [('parent.with_guarantor','=','mortgage')]}" sum="Total"/>-->
                                        <!--                                        <field name="res_social" attrs="{'column_invisible': [('parent.with_guarantor','=','mortgage')]}"/>-->
                                        <!--                                        <field name="interest_mortgage" attrs="{'column_invisible': [('parent.with_guarantor','!=','mortgage')]}"/>-->
                                        <!--                                        <field name="interest_base_mortgage" attrs="{'column_invisible': [('parent.with_guarantor','!=','mortgage')]}"/>-->
                                        <field name="balance_capital"/>
                                        <field name="interest_month_surpluy" sum="Total"/>
                                        <field name="percentage_amount_min_def"/>
                                        <field name="commission_min_def"/>
                                        <field name="amount_total" sum="Total"/>
                                        <field name="amount_total_bs" sum="Total"/>
<!--                                        <field name="state" decoration-info="state == 'init' or state == 'in_queue'"-->
<!--                                               decoration-success="state == 'progress' or state == 'done'"-->
<!--                                               widget="badge"/>-->
<!--                                        <button name="open_loan_payment" type="object" class="oe_highlight"-->
<!--                                                icon="fa-eye"/>-->

                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>

                </form>
            </field>
        </record>
        <!-- Accion para visualizar loan.application -->

        <record id="action_loan_calculator_id" model="ir.actions.act_window">
            <field name="name">Calculadora de prestamos</field>
            <field name="res_model">loan.calculator</field>
            <field name="view_mode">form</field>
        </record>

        <!-- Menu para visualizar loan.application -->
        <menuitem name="Calculadora de prestamos"
                  id="loan_calculator.menu_root"
                  sequence="5"
                  web_icon="rod_cooperativa,static/description/coaa.png"/>

        <!-- menu categories -->
        <menuitem id="loan_calculator.loan_calculator_menu_id"
                  name="Calculadora de prestamos"
                  parent="loan_calculator.menu_root"
                  sequence="1"
                  action="loan_calculator.action_loan_calculator_id"/>

    </data>
</odoo>