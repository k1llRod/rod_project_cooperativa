<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="account_move_form_inh_coa">
            <field name="name">account.move.form.inh</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='ref'][2]" position="after">
                    <field name="glosa"/>
                    <field name="payroll_payment_id" readonly="1"/>
                    <field name="loan_application_id" readonly="1"/>
                    <field name="loan_payment_id" readonly="1"/>
                    <field name="finalized_loan_id" readonly="1"/>
                    <field name="nro_cheque"/>
                    <field name="literal_number"/>
                    <field name="value_dolar" readonly="1"/>
                </xpath>
                <xpath expr="//button[@name='action_post']" position="after">
                    <button name="wizard_payroll_all" string="Ingreso aportes" class="oe_highlight" type="object" attrs="{'invisible': [('state','!=','draft')]}"/>
                    <button name="wizard_loan_all" string="Ingreso prestamos" class="oe_highlight" type="object" attrs="{'invisible': [('state','!=','draft')]}"/>
                </xpath>
                <xpath expr="//button[@name='open_payment_view']" position="after">
                    <button name="open_payroll_payment_view" class="oe_stat_button" icon="fa-bars" type="object" string="1 Aporte" attrs="{'invisible': [('payroll_payment_id','=',False)]}">
                    </button>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='debit']" position="attributes">
                    <attribute name="string">Debe</attribute>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='credit']" position="attributes">
                    <attribute name="string">Haber</attribute>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='credit']" position="after">
                    <field name="parcial" optional="hidden"/>
                </xpath>
                <xpath expr="//button[@name='button_draft']" position="after">
                    <button name="print_account_move" string="Comprobante de pago" type="object" groups="account.group_account_invoice" attrs="{'invisible' : [('show_reset_to_draft_button', '=', False)]}" data-hotkey="q" class="oe_highlight"/>
<!--                    <button name="query_test" string="Test" type="object"/>-->
                </xpath>

            </field>
        </record>
        <record id="action_account_lines_updated" model="ir.actions.server">
            <field name="name">Actualizar</field>
            <field name="model_id" ref="rod_account_coa.model_account_move"/>
            <field name="binding_model_id" ref="rod_account_coa.model_account_move"/>
            <field name="state">code</field>
            <field name="code">action = records.update_lines()</field>
        </record>
    </data>
</odoo>
